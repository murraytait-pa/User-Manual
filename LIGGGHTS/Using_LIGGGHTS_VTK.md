## LIGGGGHTS-VTK
The vtk files generated by [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code), for the particles can have any selection of variables. However, to be processed in Iota a minimum number of variables is required and the order is fixed. The same restriction affect the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) particle-particle and particle-geometry contacts files.

Iota supports the processing of spherical and multisphere particles. The details of how to dump the DEM simulation data to VTK files for each of the one of these cases is provided below:

### Spherical particles

In the particles file, the filename must have the extension ".vtk". The variables in the command must
follow :
* *id*: column one
* *type*: column two
* *x,y,z*: columns three to five
* *vx,vy,vz*: columns nine to eleven
* *radius*: column eighteen

Additional columns can be included and they will be considered as user defined variables, and will be processed in that way.
An example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) ``dump custom/vtk`` command for the particles file is:

    dump particles all custom/vtk  5000 post/vtk_ascii/particles*.vtk &
          id type x y z ix iy iz vx vy vz &
          fx fy fz omegax omegay omegaz &
          radius 

The particle-particle and particle-geometry contacts files can have any name with the extension ".vtk". An example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) dump commands for both contact files is:

    compute cp all pair/gran/local id pos force
    compute cw all wall/gran/local id pos force

    dump Cfile all local/gran/vtk 400 contacts_particles*.vtk cp
    dump Wfile all local/gran/vtk 400 contact_geometries*.vtk cw

In the case of the CAD walls/geometries, the only restriction is that all the meshes to be processed should be contained in a single vtk file per time-step for the case of moving CAD walls/geometries. In the case of static CAD wall/geometries, it is possible to just provide a single vtk file for the processing.

Example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) dump command for moving and static CAD wall/geometries files are:

* Static meshes:  ``dump dmp_geo all mesh/vtk 400 geometries.vtk cad1 cad2 cad3``
* Moving meshes:  ``dump dmp_geo all mesh/vtk 400 geometries*.vtk cad1 cad2 cad3``

A detailed description on how to use the LIGGGHTS VTK files in the [coarse-graining](/coarse_graining/cg_setting_cg.md) module can be found in the [Input DEM data: LIGGGHTS-VTK](/coarse_graining/cg_input_DEM_LIGGGHTS_VTK.md) section.


### Multisphere particles

Two set of files are required in order to process the multisphere particles data. The first set of files correspond to the sub-spheres data (similar to the particles file for spherical particles) and the filename must have the extension ".vtk". The variables in the command must follow:
* *id*: column one
* *id_multisphere*: column two
* *type*: column three
* *x,y,z*: columns four to six
* *vx,vy,vz*: columns ten to tweleve
* *radius*: column nineteen

Additional columns can be included and they will be considered as user defined variables, and will be processed in that way.
An example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) ``dump custom/vtk`` command for the particles file is:

    dump particles all custom/vtk  5000 post/vtk_ascii/particles*.vtk &
          id id_multisphere type & 
          x y z ix iy iz vx vy vz &
          fx fy fz omegax omegay omegaz &
          radius

The second set of files contain the data related to the actual particles (multispheres). In this cases, it is required to set-up a set of ``compute  multisphere`` commands that compute the properties of the multisphere particles. The data generated by these computes is exported into ASCII files (one per time-step) by means of ``dump local`` command.The files must have the extension ".dmp". The variables in the command must follow:
* *angmom*: columns one to three
* *atomtype*: column four
* *clumptype*: column five
* *density*: column six
* *fcm*: columns seven to nine
* *id_multisphere*: column ten
* *masstotal*: column eleven
* *omega*: columns twelve to fourteen
* *quat*: columns fifteen to seventeen
* *torque*: columns eighteen to tweenty
* *vcm*: columns twenty one to twenty three
* *xcm*: columns twenty four to twenty six

An example of these [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) commands is:

        compute angmom all multisphere property angmom
        compute atomtype all multisphere property atomtype
        compute clumptype all multisphere property clumptype
        compute density all multisphere property density
        compute fcm all multisphere property fcm
        compute id_multisphere all multisphere property id_multisphere
        compute masstotal all multisphere property masstotal
        compute omega all multisphere property omega
        compute quat all multisphere property quat
        compute torque all multisphere property torque
        compute vcm all multisphere property vcm
        compute xcm all multisphere property xcm
        
        dump dump_ms all local 400 multispheres.*.dmp &
                c_angmom[1] c_angmom[2] c_angmom[3] &
                c_atomtype &
                c_clumptype &
                c_density &
                c_fcm[1] c_fcm[2] c_fcm[3] &
                c_id_multisphere &
                c_masstotal &
                c_omega[1] c_omega[2] c_omega[3] &
                c_quat[1] c_quat[2] c_quat[3] c_quat[4] &
                c_torque[1] c_torque[2] c_torque[3] &
                c_vcm[1] c_vcm[2] c_vcm[3] &
                c_xcm[1] c_xcm[2] c_xcm[3]
                
The particle-particle and particle-geometry contacts files can have any name with the extension ".vtk". An example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) dump commands for both contact files is:

        compute cp all pair/gran/local id pos force
        compute cw all wall/gran/local id pos force

        dump Cfile all local/gran/vtk 400 contacts_particles*.vtk cp
        dump Wfile all local/gran/vtk 400 contact_geometries*.vtk cw

In the case of the CAD walls/geometries, the only restriction is that all the meshes to be processed should be contained in a single vtk file per time-step for the case of moving CAD walls/geometries. In the case of static CAD wall/geometries, it is possible to just provide a single vtk file for the processing.

Example of the [LIGGGHTS](http://www.cfdem.com/liggghts-open-source-discrete-element-method-particle-simulation-code) dump command for moving and static CAD wall/geometries files are:

* Static meshes: ``dump dmp_geo all mesh/vtk 400 geometries.vtk cad1 cad2 cad3``
* Moving meshes: ``dump dmp_geo all mesh/vtk 400 geometries*.vtk cad1 cad2 cad3``
